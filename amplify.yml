version: 1
frontend:
  phases:
    preBuild:
      commands:
        - pip3 install awscli --upgrade --user
        - aws codeartifact login --tool npm --repository CodeArtifactRepository --domain jinpearl --domain-owner 173720363532
        - npm install -g yarn
        - npm --version
        - ls -al
        - cat .npmrc
        - cat .yarnrc
        - yarn
    build:
      commands:
        - yarn build
  artifacts:
    baseDirectory: /dist
    files:
      - '**/*'
  cache:
    paths:
      - '/root/.yarn-cache/**/*'
      - node_modules/**/*